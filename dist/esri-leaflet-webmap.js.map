{"version":3,"file":null,"sources":["../src/Popup/Popup.js","../src/Label/Label.js","../src/OperationalLayer.js","../src/WebMapLoader.js"],"sourcesContent":["export function createPopupContent (popupInfo, properties) {\r\n    //console.log(popupInfo, properties);\r\n    var r = /\\{([^\\]]*)\\}/g;\r\n    var titleText = '';\r\n    var content = '';\r\n\r\n    if (popupInfo.title !== undefined) {\r\n        titleText = popupInfo.title;\r\n    }\r\n\r\n    titleText = titleText.replace(r, function(s) {\r\n        var m = r.exec(s);\r\n        return properties[m[1]];\r\n    });\r\n\r\n    content = '<div class=\"leaflet-popup-content-title\"><h4>' + titleText + '</h4></div><div class=\"leaflet-popup-content-description\" style=\"max-height:200px;overflow:auto;\">';\r\n    \r\n    for (var i = 0; i < popupInfo.fieldInfos.length; i++) {\r\n        if (popupInfo.fieldInfos[i].visible === true) {\r\n            content += '<div style=\"font-weight:bold;color:#999;margin-top:5px;word-break:break-all;\">' + popupInfo.fieldInfos[i].label + '</div><p style=\"margin-top:0;margin-bottom:5px;word-break:break-all;\">' + properties[popupInfo.fieldInfos[i].fieldName] + '</p>';\r\n        }\r\n    }\r\n\r\n    content += '</div>';\r\n\r\n    if (popupInfo.mediaInfos.length > 0) {\r\n        // It does not support mediaInfos for popup contents.\r\n    }\r\n\r\n    return content;\r\n}\r\n\r\nexport var Popup = {\r\n  createPopupContent: createPopupContent\r\n};\r\n\r\nexport default Popup;","export function createLabelText (properties, labelingInfo) {\r\n    //console.log('generateLabels: ', properties, labelingInfo);\r\n    var r = /\\[([^\\]]*)\\]/g;\r\n    var labelText = labelingInfo[0].labelExpression;\r\n\r\n    labelText = labelText.replace(r, function(s) {\r\n        var m = r.exec(s);\r\n        //console.log(m[1]);\r\n        //console.log(properties[m[1]]);\r\n        return properties[m[1]];\r\n    });\r\n\r\n    return labelText;\r\n}\r\n\r\nexport var Label = {\r\n  createLabelText: createLabelText\r\n};\r\n\r\nexport default Label;","import L from 'leaflet';\r\nimport { createPopupContent } from './Popup/Popup';\r\nimport { createLabelText } from './Label/Label';\r\n\r\nexport function operationalLayer (layer, layers, map) {\r\n  return _generateEsriLayer(layer, layers, map);\r\n}\r\n\r\nexport function _generateEsriLayer (layer, layers, map) {\r\n    console.log('generateEsriLayer: ', layer.title, layer);\r\n\r\n    if(layer.featureCollection !== undefined) {\r\n        // Supporting only point geometry\r\n        console.log('create FeatureCollection');\r\n        var renderer = layer.featureCollection.layers[0].layerDefinition.drawingInfo.renderer;\r\n        //console.log(renderer);\r\n        var features = [];\r\n        var labels = [];\r\n\r\n        layer.featureCollection.layers[0].featureSet.features.map(function(feature) {\r\n\r\n            var icon = _generateIcon(renderer, feature.attributes);\r\n            var mercatorToLatlng = L.Projection.SphericalMercator.unproject(L.point(feature.geometry.x, feature.geometry.y));\r\n\r\n            var f = L.marker(mercatorToLatlng, { icon: icon, opacity: layer.opacity });\r\n\r\n            if(layer.featureCollection.layers[0].popupInfo !== undefined) {\r\n                var popupContent = createPopupContent(layer.featureCollection.layers[0].popupInfo, feature.attributes);\r\n                f.bindPopup(popupContent);\r\n            }\r\n\r\n            if(layer.featureCollection.layers[0].layerDefinition.drawingInfo.labelingInfo !== undefined) {\r\n                var labelingInfo = layer.featureCollection.layers[0].layerDefinition.drawingInfo.labelingInfo;\r\n                var labelText = createLabelText(feature.attributes, labelingInfo);\r\n                    // with Leaflet.label\r\n                    //f.bindLabel(labelText, { noHide: true }).showLabel();\r\n\r\n                    // without Leaflet.label\r\n                    var label = L.marker(mercatorToLatlng, {\r\n                        zIndexOffset: 1,\r\n                    icon: L.divIcon({\r\n                    iconSize: null,\r\n                    className: 'point-label',\r\n                    html: '<div>' + labelText + '</div>'\r\n                    })\r\n                });\r\n\r\n                labels.push(label);\r\n            }\r\n\r\n            features.push(f);\r\n        });\r\n\r\n        var lyr = L.featureGroup(features);\r\n\r\n        if(labels.length > 0) {\r\n            var labelsLayer = L.featureGroup(labels);\r\n            lyr = L.layerGroup([lyr, labelsLayer]);\r\n        }\r\n\r\n        layers.push({ type: 'FC', title: layer.title || '', layer: lyr });\r\n\r\n        return lyr;\r\n    }\r\n    else if(layer.layerType === 'ArcGISFeatureLayer' && layer.layerDefinition !== undefined) {\r\n        if(layer.layerDefinition.drawingInfo !== undefined){\r\n            if(layer.layerDefinition.drawingInfo.renderer.type === 'heatmap'){\r\n                console.log('create HeatmapLayer');\r\n                var gradient = {};\r\n\r\n                layer.layerDefinition.drawingInfo.renderer.colorStops.map(function(stop) {\r\n                    //gradient[stop.ratio] = 'rgba(' + stop.color[0] + ',' + stop.color[1] + ',' + stop.color[2] + ',' + (stop.color[3]/255) + ')';\r\n                    //gradient[Math.round(stop.ratio*100)/100] = 'rgb(' + stop.color[0] + ',' + stop.color[1] + ',' + stop.color[2] + ')';\r\n                    gradient[(Math.round(stop.ratio*100)/100+6)/7] = 'rgb(' + stop.color[0] + ',' + stop.color[1] + ',' + stop.color[2] + ')';\r\n                });\r\n                //console.log(layer.layerDefinition.drawingInfo.renderer);\r\n\r\n                var lyr = L.esri.Heat.heatmapFeatureLayer({ // Esri Leaflet 2.0\r\n                //var lyr = L.esri.heatmapFeatureLayer({ // Esri Leaflet 1.0\r\n                    url: layer.url,\r\n                    minOpacity: 0.5,\r\n                    max: layer.layerDefinition.drawingInfo.renderer.maxPixelIntensity,\r\n                    blur: layer.layerDefinition.drawingInfo.renderer.blurRadius,\r\n                    radius: layer.layerDefinition.drawingInfo.renderer.blurRadius * 1.3,\r\n                    gradient: gradient\r\n                })\r\n                layers.push({ type: 'HL', title: layer.title || '', layer: lyr });\r\n\r\n                return lyr;\r\n            }\r\n            else {\r\n                console.log('create ArcGISFeatureLayer (with layerDefinition.drawingInfo)');\r\n                var renderer = layer.layerDefinition.drawingInfo.renderer;\r\n                var where = '1=1';\r\n\r\n                if(layer.layerDefinition.definitionExpression !== undefined) {\r\n                    where = layer.layerDefinition.definitionExpression;\r\n                }\r\n\r\n                var labels = [];\r\n                var labelsLayer = L.featureGroup(labels);\r\n                var lyr = L.esri.featureLayer({\r\n                    url: layer.url,\r\n                    where: where,\r\n                    ignoreRenderer: true,\r\n                    pointToLayer: function (geojson, latlng) {\r\n                        //console.log(geojson);\r\n                        var icon = _generateIcon(renderer, geojson.properties);\r\n\r\n                        var f = L.marker(latlng, {\r\n                            icon: icon,\r\n                            opacity: layer.opacity\r\n                        });\r\n\r\n                        return f;\r\n                    },\r\n                    style: function (geojson) {\r\n                        var pathOptions;\r\n                        //console.log(geojson);\r\n                        if(geojson.geometry.type === 'LineString' || geojson.geometry.type === 'MultiLineString' || geojson.geometry.type === 'Polygon' || geojson.geometry.type === 'MultiPolygon') {\r\n                            pathOptions = _generatePathStyle(renderer, geojson.properties);\r\n                        }\r\n                        else {\r\n                            //console.log(geojson);\r\n                        }\r\n\r\n                        return pathOptions;\r\n                    },\r\n                    onEachFeature: function (geojson, l) {\r\n                        if(layer.popupInfo !== undefined) {\r\n                            var popupContent = createPopupContent(layer.popupInfo, geojson.properties);\r\n                            l.bindPopup(popupContent);\r\n                        }\r\n                        if(layer.layerDefinition.drawingInfo.labelingInfo !== undefined) {\r\n                            var labelingInfo = layer.layerDefinition.drawingInfo.labelingInfo;\r\n                            var labelText = createLabelText(geojson.properties, labelingInfo);\r\n                            //console.log(labelText);\r\n                            // with Leaflet.label\r\n                            //f.bindLabel(labelText, { noHide: true }).showLabel();\r\n\r\n                            //console.log(geojson);\r\n                            //console.log(l);\r\n                            var labelPos;\r\n                            var labelClassName;\r\n                            if(l.feature.geometry.type === 'Point') {\r\n                                labelPos = l.feature.geometry.coordinates.reverse();\r\n                                labelClassName = 'point-label';\r\n                            }\r\n                            else if(l.feature.geometry.type === 'LineString') {\r\n                                //console.log(l.feature.geometry.coordinates);\r\n                                var c = l.feature.geometry.coordinates;\r\n                                var centralKey = Math.round(c.length/2);\r\n                                //console.log(c[centralKey]);\r\n                                labelPos = c[centralKey].reverse();\r\n                                labelClassName = 'path-label';\r\n                            }\r\n                            else if(l.feature.geometry.type === 'MultiLineString') {\r\n                                //.log(l.feature.geometry.coordinates);\r\n                                var c = l.feature.geometry.coordinates;\r\n                                var centralKey = Math.round(c.length/2);\r\n                                var c2 = c[centralKey];\r\n                                var centralKey = Math.round(c2.length/2);\r\n                                //console.log(c2[centralKey]);\r\n                                labelPos = c2[centralKey].reverse();\r\n                                labelClassName = 'path-label';\r\n                            }\r\n                            else {\r\n                                labelPos = l.getBounds().getCenter();\r\n                                //console.log(labelPos);\r\n                                labelClassName = 'path-label';\r\n                            }\r\n                            // without Leaflet.label\r\n                            var label = L.marker(labelPos, {\r\n                                zIndexOffset: 1,\r\n                                icon: L.divIcon({\r\n                                    iconSize: null,\r\n                                    className: labelClassName,\r\n                                    html: '<div>' + labelText + '</div>'\r\n                                })\r\n                            });\r\n\r\n                            labelsLayer.addLayer(label);\r\n                        }\r\n                    }\r\n                });\r\n\r\n                lyr = L.layerGroup([lyr, labelsLayer]);\r\n\r\n                layers.push({ type: 'FL', title: layer.title || '', layer: lyr });\r\n\r\n                return lyr;\r\n            }\r\n        }\r\n        else {\r\n            console.log('create ArcGISFeatureLayer (without layerDefinition.drawingInfo)');\r\n            var where = '1=1';\r\n\r\n            if(layer.layerDefinition.definitionExpression !== undefined) {\r\n                where = layer.layerDefinition.definitionExpression;\r\n            }\r\n\r\n            var lyr = L.esri.featureLayer({\r\n                url: layer.url,\r\n                where: where,\r\n                onEachFeature: function (geojson, l) {\r\n                    if(layer.popupInfo !== undefined) {\r\n                        var popupContent = createPopupContent(layer.popupInfo, geojson.properties);\r\n                        l.bindPopup(popupContent);\r\n                    }\r\n                }\r\n            });\r\n\r\n            /*lyr.metadata(function(error, response) {\r\n                console.log(error, response);\r\n            }, function(error) { console.log(error); });*/\r\n\r\n            layers.push({ type: 'FL', title: layer.title || '', layer: lyr });\r\n\r\n            return lyr;\r\n        }\r\n    }\r\n    else if(layer.layerType === 'ArcGISFeatureLayer') {\r\n        console.log('create ArcGISFeatureLayer');\r\n        var lyr = L.esri.featureLayer({\r\n            url: layer.url,\r\n            onEachFeature: function (geojson, l) {\r\n                if(layer.popupInfo !== undefined) {\r\n                    var popupContent = createPopupContent(layer.popupInfo, geojson.properties);\r\n                    l.bindPopup(popupContent);\r\n                }\r\n            },\r\n            pointToLayer: function (geojson, latlng) {\r\n\r\n                var f = L.marker(latlng, {\r\n                    //icon: icon,\r\n                    opacity: layer.opacity\r\n                });\r\n\r\n                return f;\r\n            }\r\n        });\r\n\r\n        /*lyr.metadata(function(error, response) {\r\n            console.log(error, response);\r\n        }, function(error) { console.log(error); });*/\r\n\r\n        layers.push({ type: 'FL', title: layer.title || '', layer: lyr });\r\n\r\n        return lyr;\r\n    }\r\n    else if(layer.layerType === 'ArcGISImageServiceLayer') {\r\n        console.log('create ArcGISImageServiceLayer');\r\n        var lyr = L.esri.imageMapLayer({\r\n            url: layer.url\r\n        });\r\n\r\n        layers.push({ type: 'IML', title: layer.title || '', layer: lyr });\r\n\r\n        return lyr;\r\n    }\r\n    else if(layer.layerType === 'ArcGISMapServiceLayer') {\r\n        var lyr = L.esri.dynamicMapLayer({\r\n            url: layer.url\r\n        });\r\n\r\n        layers.push({ type: 'DML', title: layer.title || '', layer: lyr });\r\n\r\n        return lyr;\r\n    }\r\n    else if(layer.layerType === 'ArcGISTiledMapServiceLayer') {\r\n    try {\r\n    var lyr = L.esri.basemapLayer(layer.title);\r\n    }\r\n    catch (e) {\r\n    var lyr = L.esri.tiledMapLayer({\r\n            url: layer.url\r\n        });\r\n\r\n    L.esri.request(layer.url, {}, function (err, res) {\r\n        var maxWidth = (map.getSize().x - 55);\r\n        var tiledAttribution = '<span class=\"esri-attributions\" style=\"line-height:14px; vertical-align: -3px; text-overflow:ellipsis; white-space:nowrap; overflow:hidden; display:inline-block; max-width:' + maxWidth + 'px;\">' + res.copyrightText + '</span>'\r\n        map.attributionControl.addAttribution(tiledAttribution);\r\n    });\r\n    }\r\n\r\n    layers.push({ type: 'TML', title: layer.title || '', layer: lyr });\r\n    return lyr;\r\n\r\n    }\r\n    else if(layer.layerType === 'OpenStreetMap') {\r\n        var lyr = L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {\r\n            attribution: '&copy; <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\r\n        });\r\n\r\n        layers.push({ type: 'TL', title: layer.title || layer.id || '', layer: lyr });\r\n\r\n        return lyr;\r\n    }\r\n    else if(layer.layerType === 'WebTiledLayer') {\r\n        var lyrUrl = _esriWTLUrlTemplateToLeaflet(layer.templateUrl);\r\n        var lyr = L.tileLayer(lyrUrl, {\r\n            attribution: layer.copyright\r\n        });\r\n\r\n        layers.push({ type: 'TL', title: layer.title || layer.id || '', layer: lyr });\r\n\r\n        return lyr;\r\n    }\r\n    else if(layer.layerType === '') {\r\n        return false;\r\n    }\r\n    else {\r\n        var lyr = L.featureGroup([]);\r\n        console.log('Unsupported Layer: ', layer);\r\n        return lyr;\r\n    }\r\n}\r\n\r\n\r\n// i will duplicate the below functions\r\n// and replace esri-leaflet-renderers.\r\nexport function _pointSymbol (symbol) {\r\n    var icon;\r\n\r\n        if(symbol.type === 'esriPMS') {\r\n            var iconUrl = symbol.url;\r\n\r\n            if(symbol.imageData !== undefined) {\r\n                iconUrl = 'data:' + symbol.contentType + ';base64,' + symbol.imageData;\r\n            }\r\n\r\n            icon = L.icon({\r\n                iconUrl: iconUrl,\r\n                shadowUrl: '',\r\n                iconSize:     [(symbol.height*4/3), (symbol.width*4/3)],\r\n                shadowSize:   [0, 0],\r\n                iconAnchor:   [(symbol.height*4/3)-16, (symbol.width*4/3)-1],\r\n                shadowAnchor: [0, 0],\r\n                popupAnchor:  [(symbol.width*4/3)/3, (symbol.height*4/3)*-1]\r\n            });\r\n        }\r\n        if(symbol.type === 'esriSMS') {\r\n            if(symbol.style === 'esriSMSCircle') {\r\n                if(symbol.outline.style === 'esriSLSNull') {\r\n                    icon = L.vectorIcon({\r\n                        //className: 'my-vector-icon',\r\n                        svgHeight: ((symbol.size*4/3)/2 + (symbol.outline.width*4/3)) * 2,\r\n                        svgWidth: ((symbol.size*4/3)/2 + (symbol.outline.width*4/3)) * 2,\r\n                        type: 'circle',\r\n                        shape: {\r\n                            r: (symbol.size*4/3)/2 + '',\r\n                            cx: (symbol.size*4/3)/2 + (symbol.outline.width*4/3),\r\n                            cy: (symbol.size*4/3)/2 + (symbol.outline.width*4/3)\r\n                        },\r\n                        style: {\r\n                            fill: 'rgba(' + symbol.color[0] + ',' + symbol.color[1] + ',' + symbol.color[2] + ',' + symbol.color[3]/255 + ')',\r\n                            //stroke: '',\r\n                            strokeWidth: 0\r\n                        }\r\n                    });\r\n                }\r\n                else {\r\n                    icon = L.vectorIcon({\r\n                        //className: 'my-vector-icon',\r\n                        svgHeight: ((symbol.size*4/3)/2 + (symbol.outline.width*4/3)) * 2,\r\n                        svgWidth: ((symbol.size*4/3)/2 + (symbol.outline.width*4/3)) * 2,\r\n                        type: 'circle',\r\n                        shape: {\r\n                            r: (symbol.size*4/3)/2 + '',\r\n                            cx: (symbol.size*4/3)/2 + (symbol.outline.width*4/3),\r\n                            cy: (symbol.size*4/3)/2 + (symbol.outline.width*4/3)\r\n                        },\r\n                        style: {\r\n                            fill: 'rgba(' + symbol.color[0] + ',' + symbol.color[1] + ',' + symbol.color[2] + ',' + symbol.color[3]/255 + ')',\r\n                            stroke: 'rgba(' + symbol.outline.color[0] + ',' + symbol.outline.color[1] + ',' + symbol.outline.color[2] + ',' + symbol.outline.color[3]/255 + ')',\r\n                            strokeWidth: (symbol.outline.width*4/3)\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n            else if(symbol.style === 'esriSMSSquare') {\r\n                if(symbol.outline.style === 'esriSLSNull') {\r\n                    icon = L.vectorIcon({\r\n                        //className: 'my-vector-icon',\r\n                        svgHeight: (symbol.size*4/3) + (symbol.outline.width*4/3) * 2 + 2,\r\n                        svgWidth: (symbol.size*4/3) + (symbol.outline.width*4/3) * 2 + 2,\r\n                        type: 'rect',\r\n                        shape: {\r\n                            x: '1',\r\n                            y: '1',\r\n                            width: (symbol.size*4/3) + '',\r\n                            height: (symbol.size*4/3) + ''\r\n                        },\r\n                        style: {\r\n                            fill: 'rgba(' + symbol.color[0] + ',' + symbol.color[1] + ',' + symbol.color[2] + ',' + symbol.color[3]/255 + ')',\r\n                            //stroke: '',\r\n                            strokeWidth: 0\r\n                        }\r\n                    });\r\n                }\r\n                else {\r\n                    icon = L.vectorIcon({\r\n                        //className: 'my-vector-icon',\r\n                        svgHeight: (symbol.size*4/3) + (symbol.outline.width*4/3) * 2 + 2,\r\n                        svgWidth: (symbol.size*4/3) + (symbol.outline.width*4/3) * 2 + 2,\r\n                        type: 'rect',\r\n                        shape: {\r\n                            x: '1',\r\n                            y: '1',\r\n                            width: (symbol.size*4/3) + '',\r\n                            height: (symbol.size*4/3) + ''\r\n                        },\r\n                        style: {\r\n                            fill: 'rgba(' + symbol.color[0] + ',' + symbol.color[1] + ',' + symbol.color[2] + ',' + symbol.color[3]/255 + ')',\r\n                            stroke: 'rgba(' + symbol.outline.color[0] + ',' + symbol.outline.color[1] + ',' + symbol.outline.color[2] + ',' + symbol.outline.color[3]/255 + ')',\r\n                            strokeWidth: (symbol.outline.width*4/3)\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n            /*else if(symbol.style === 'esriSMSDiamond') {\r\n                if(symbol.outline.style === 'esriSLSNull') {\r\n\r\n                }\r\n                else {\r\n\r\n                }\r\n            }*/\r\n            else if(symbol.style === '') {\r\n                if(symbol.outline.style === 'esriSLSNull') {\r\n\r\n                }\r\n                else {\r\n\r\n                }\r\n            }\r\n            // Other SMSs -> Circle\r\n            else {\r\n                if(symbol.outline.style === 'esriSLSNull') {\r\n                    icon = L.vectorIcon({\r\n                        //className: 'my-vector-icon',\r\n                        svgHeight: ((symbol.size*4/3) + (symbol.outline.width*4/3)) * 2,\r\n                        svgWidth: ((symbol.size*4/3) + (symbol.outline.width*4/3)) * 2,\r\n                        type: 'circle',\r\n                        shape: {\r\n                            r: (symbol.size*4/3) + '',\r\n                            cx: (symbol.size*4/3) + (symbol.outline.width*4/3),\r\n                            cy: (symbol.size*4/3) + (symbol.outline.width*4/3)\r\n                        },\r\n                        style: {\r\n                            fill: 'rgba(' + symbol.color[0] + ',' + symbol.color[1] + ',' + symbol.color[2] + ',' + symbol.color[3]/255 + ')',\r\n                            //stroke: '',\r\n                            strokeWidth: 0\r\n                        }\r\n                    });\r\n                }\r\n                else {\r\n                    icon = L.vectorIcon({\r\n                        //className: 'my-vector-icon',\r\n                        svgHeight: ((symbol.size*4/3) + (symbol.outline.width*4/3)) * 2,\r\n                        svgWidth: ((symbol.size*4/3) + (symbol.outline.width*4/3)) * 2,\r\n                        type: 'circle',\r\n                        shape: {\r\n                            r: (symbol.size*4/3) + '',\r\n                            cx: (symbol.size*4/3) + (symbol.outline.width*4/3),\r\n                            cy: (symbol.size*4/3) + (symbol.outline.width*4/3)\r\n                        },\r\n                        style: {\r\n                            fill: 'rgba(' + symbol.color[0] + ',' + symbol.color[1] + ',' + symbol.color[2] + ',' + symbol.color[3]/255 + ')',\r\n                            stroke: 'rgba(' + symbol.outline.color[0] + ',' + symbol.outline.color[1] + ',' + symbol.outline.color[2] + ',' + symbol.outline.color[3]/255 + ')',\r\n                            strokeWidth: (symbol.outline.width*4/3)\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n        }\r\n\r\n        return icon;\r\n}\r\n\r\nexport function _pathSymbol (symbol) {\r\n    var style;\r\n\r\n    if(symbol.style === 'esriSLSSolid') {\r\n        style = {\r\n            color: 'rgba(' + symbol.color[0] + ',' + symbol.color[1] + ',' + symbol.color[2] + ',' + symbol.color[3]/255 + ')',\r\n            weight: (symbol.size*4/3) || (symbol.width*4/3)\r\n        }\r\n    }\r\n\r\n    if(symbol.style === 'esriSFSSolid') {\r\n        var color = symbol.color\r\n        var outlineColor = symbol.outline.color;\r\n\r\n        if(symbol.color === null) {\r\n            color = [0,0,0,0];\r\n        }\r\n\r\n        if(symbol.outline.color === null) {\r\n            outlineColor = [0,0,0,0];\r\n        }\r\n\r\n        style = {\r\n            fillColor: 'rgb(' + color[0] + ',' + color[1] + ',' + color[2] + ')',\r\n            fillOpacity: color[3]/255,\r\n            color: 'rgba(' + outlineColor[0] + ',' + outlineColor[1] + ',' + outlineColor[2] + ',' + outlineColor[3]/255 + ')',\r\n            weight: (symbol.outline.width*4/3)\r\n        }\r\n    }\r\n\r\n    return style;\r\n}\r\n\r\nexport function _calVisualVariables (symbol, visualVariables, properties) {\r\n    var vvSymbol = symbol;\r\n    //var value = properties[visualVariables[0].field];\r\n\r\n    visualVariables.map(function (vv) {\r\n        var value = properties[vv.field];\r\n\r\n        if(vv.type === 'sizeInfo') {\r\n            var rate = (value - vv.minDataValue)/(vv.maxDataValue - vv.minDataValue);\r\n            var submitSize = (rate * (vv.maxSize - vv.minSize)) + vv.minSize;\r\n            vvSymbol.size = submitSize;\r\n            if(value === null) {\r\n                vvSymbol.size = 6;\r\n            }\r\n        }\r\n        else if(vv.type === 'colorInfo') {\r\n            // Color Ramp\r\n            //console.log(symbol.color);\r\n            var stops = vv.stops;\r\n            //console.log(vv.stops);\r\n            stops.map(function(stop, i) {\r\n                //console.log('base color: ', stop.color);\r\n                if(i === 0) {\r\n                    if(stop.value > value) {\r\n                        var submitColor = stop.color;\r\n                        vvSymbol.color = submitColor;\r\n                        //console.log('min: ', vvSymbol.color);\r\n                    }\r\n                }\r\n                else if(i === stops.length-1) {\r\n                    if(stop.value <= value) {\r\n                        var submitColor = stop.color;\r\n                        vvSymbol.color = submitColor;\r\n                        //console.log('max: ', vvSymbol.color);\r\n                    }\r\n                }\r\n                else {\r\n                    if(stop.value > value && stops[i-1].value <= value) {\r\n                        var submitColor = [];\r\n                        var rate = (value - stops[i-1].value)/(stop.value - stops[i-1].value);\r\n                        vvSymbol.color.map(function(color, j) {\r\n                            submitColor[j] = Math.round((rate * (stop.color[j] - stops[i-1].color[j])) + stops[i-1].color[j]);\r\n                        });\r\n                        vvSymbol.color = submitColor;\r\n                        //console.log(vvSymbol.color);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    });\r\n\r\n    return vvSymbol;\r\n}\r\n\r\nexport function _generatePathStyle (renderer, properties) {\r\n    var style = {};\r\n\r\n    if(renderer.type === 'simple') {\r\n        style = _pathSymbol(renderer.symbol);\r\n    }\r\n\r\n    if(renderer.type === 'uniqueValue') {\r\n        renderer.uniqueValueInfos.map(function(info) {\r\n            if(info.value === properties[renderer.field1]) { // field2, field3は後で考えよう\r\n                var symbol = info.symbol;\r\n                if(renderer.visualVariables !== undefined) {\r\n                    symbol = _calVisualVariables(info.symbol, renderer.visualVariables, properties);\r\n                }\r\n                style = _pathSymbol(symbol);\r\n            }\r\n        });\r\n    }\r\n\r\n    if(renderer.type === 'classBreaks') {\r\n        renderer.classBreakInfos.map(function(info, i) {\r\n            var prevInfo;\r\n            var symbol = info.symbol;\r\n\r\n            if(i === 0) {\r\n                prevInfo = renderer.minValue;\r\n            }\r\n            else {\r\n                prevInfo = renderer.classBreakInfos[i-1].classMaxValue;\r\n            }\r\n            //console.log(info.classMaxValue, properties[renderer.field], prevInfo);\r\n\r\n            if(renderer.classBreakInfos.length === (i+1)) {\r\n                if(info.classMaxValue >= properties[renderer.field] && prevInfo <= properties[renderer.field]) {\r\n                    if(renderer.visualVariables !== undefined) {\r\n                        symbol = _calVisualVariables(info.symbol, renderer.visualVariables, properties);\r\n                    }\r\n                    style = _pathSymbol(info.symbol);\r\n                }\r\n            }\r\n            else {\r\n                if(info.classMaxValue > properties[renderer.field] && prevInfo <= properties[renderer.field]) {\r\n                    if(renderer.visualVariables !== undefined) {\r\n                        symbol = _calVisualVariables(info.symbol, renderer.visualVariables, properties);\r\n                    }\r\n                    style = _pathSymbol(info.symbol);\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    return style;\r\n}\r\n\r\nexport function _generateIcon (renderer, properties) {\r\n    //console.log(renderer);\r\n    var icon;\r\n\r\n    if(renderer.type === 'simple') {\r\n        icon = _pointSymbol(renderer.symbol);\r\n    }\r\n\r\n    if(renderer.type === 'uniqueValue') {\r\n        renderer.uniqueValueInfos.map(function(info) {\r\n            if(info.value === properties[renderer.field1]) { // field2, field3は後で考えよう\r\n                var symbol = info.symbol;\r\n                if(renderer.visualVariables !== undefined) {\r\n                    symbol = _calVisualVariables(info.symbol, renderer.visualVariables, properties);\r\n                }\r\n                //console.log(symbol);\r\n                icon = _pointSymbol(symbol);\r\n            }\r\n        });\r\n    }\r\n\r\n    if(renderer.type === 'classBreaks') {\r\n        renderer.classBreakInfos.map(function(info, i) {\r\n            var prevInfo;\r\n            var symbol = info.symbol;\r\n\r\n            if(i === 0) {\r\n                prevInfo = renderer.minValue;\r\n            }\r\n            else {\r\n                prevInfo = renderer.classBreakInfos[i-1].classMaxValue;\r\n            }\r\n            //console.log(info.classMaxValue, properties[renderer.field], prevInfo);\r\n\r\n            if(renderer.classBreakInfos.length === (i+1)) {\r\n                if(info.classMaxValue >= properties[renderer.field] && prevInfo <= properties[renderer.field]) {\r\n                    if(renderer.visualVariables !== undefined) {\r\n                        symbol = _calVisualVariables(info.symbol, renderer.visualVariables, properties);\r\n                    }\r\n                    icon = _pointSymbol(symbol);\r\n                }\r\n            }\r\n            else {\r\n                if(info.classMaxValue > properties[renderer.field] && prevInfo <= properties[renderer.field]) {\r\n                    if(renderer.visualVariables !== undefined) {\r\n                        symbol = _calVisualVariables(info.symbol, renderer.visualVariables, properties);\r\n                    }\r\n                    icon = _pointSymbol(info.symbol);\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    return icon;\r\n}\r\n\r\nexport function _esriWTLUrlTemplateToLeaflet (url) {\r\n    var r = /\\{([^\\]]*)\\}/g;\r\n    var newUrl = url;\r\n\r\n    newUrl = newUrl.replace(/\\{level}/g, '{z}');\r\n    newUrl = newUrl.replace(/\\{col}/g, '{x}');\r\n    newUrl = newUrl.replace(/\\{row}/g, '{y}');\r\n    //console.log(newUrl);\r\n\r\n    return newUrl;\r\n}\r\n\r\nexport var OperationalLayer = {\r\n  operationalLayer: operationalLayer\r\n};\r\n\r\nexport default OperationalLayer;","/*\r\n * L.esri.WebMap\r\n * A leaflet plugin to display ArcGIS Web Map. https://github.com/ynunokawa/L.esri.WebMap\r\n * (c) 2016 Yusuke Nunokawa\r\n *\r\n * @example\r\n *\r\n * ```js\r\n * var webmap = L.webmap('22c504d229f14c789c5b49ebff38b941', { map: L.map('map') });\r\n * ```\r\n */\r\n\r\nimport { version } from '../package.json';\r\n\r\nimport L from 'leaflet';\r\nimport { operationalLayer } from './OperationalLayer';\r\n\r\nexport var WebMap = L.Evented.extend({\r\n\toptions: {\r\n        // L.Map\r\n\t\tmap: {},\r\n        // access token for secure contents on ArcGIS Online\r\n        token: null\r\n\t},\r\n\r\n\tinitialize: function(webmapId, options) {\r\n\t\tL.setOptions(this, options);\r\n\r\n\t\tthis._map = this.options.map;\r\n        this._token = this.options.token;\r\n\t\tthis._webmapId = webmapId;\r\n        this._loaded = false;\r\n\t\tthis._metadataLoaded = false;\r\n\r\n        this.layers = []; // Check the layer types here -> https://github.com/ynunokawa/L.esri.WebMap/wiki/Layer-types\r\n        this.title = ''; // Web Map Title\r\n        this.bookmarks = []; // Web Map Bookmarks -> [{ name: 'Bookmark name', bounds: <L.latLngBounds> }]\r\n        this.portalItem = {}; // Web Map Metadata\r\n        \r\n        this.VERSION = version;\r\n\r\n\t\tthis._loadWebMapMetaData(webmapId);\r\n\t\tthis._loadWebMap(webmapId);\r\n\t},\r\n\r\n\t_loadWebMapMetaData: function(id) {\r\n        //console.log(this);\r\n        //console.log(this._token);\r\n\t\tvar map = this._map;\r\n\t\tvar webmap = this;\r\n\t\tvar webmapMetaDataRequestUrl = 'https://www.arcgis.com/sharing/rest/content/items/' + id;\r\n\r\n\t\tL.esri.request(webmapMetaDataRequestUrl, {}, function(error, response){\r\n\t\t  if(error){\r\n\t\t    console.log(error);\r\n\t\t  } else {\r\n\t\t    console.log('WebMap MetaData: ', response);\r\n            //console.log('extent: ', response.extent);\r\n            webmap.portalItem = response;\r\n            webmap.title = response.title;\r\n            webmap._metadataLoaded = true;\r\n            webmap.fire('metadataLoad');\r\n            map.fitBounds([response.extent[0].reverse(), response.extent[1].reverse()]);\r\n\t\t  }\r\n\t\t});\r\n\t},\r\n\r\n\t_loadWebMap: function(id) {\r\n\t\tvar map = this._map;\r\n        var layers = this.layers;\r\n\t\tvar generateEsriLayer = this._generateEsriLayer;\r\n\t\tvar webmapRequestUrl = 'https://www.arcgis.com/sharing/rest/content/items/' + id + '/data';\r\n\r\n\t\tL.esri.request(webmapRequestUrl, {}, function(error, response){\r\n\t\t  if(error){\r\n\t\t    console.log(error);\r\n\t\t  } else {\r\n\t\t    console.log('WebMap: ', response);\r\n\t\t\t\t//console.log('baseMap: ', response.baseMap);\r\n\t\t\t\t//console.log('operationalLayers: ', response.operationalLayers);\r\n\r\n\t\t\t\t// Add Basemap\r\n\t\t\t\tresponse.baseMap.baseMapLayers.map(function(baseMapLayer) {\r\n\t\t\t\t\tvar lyr = operationalLayer(baseMapLayer, layers, map).addTo(map);\r\n                    if(lyr !== undefined && baseMapLayer.visibility === true) {\r\n                        lyr.addTo(map);\r\n                    }\r\n\t\t\t\t}.bind(this));\r\n\r\n\t\t\t\t// Add Operational Layers\r\n\t\t\t\tresponse.operationalLayers.map(function(layer) {\r\n                    var lyr = operationalLayer(layer, layers, map);\r\n                    if(lyr !== undefined && layer.visibility === true) {\r\n                        lyr.addTo(map);\r\n                    }\r\n\t\t\t\t}.bind(this));\r\n\r\n                // Add Bookmarks\r\n                if(response.bookmarks !== undefined && response.bookmarks.length > 0) {\r\n                    response.bookmarks.map(function(bookmark) {\r\n                        // Esri Extent Geometry to L.latLngBounds\r\n                        var northEast = L.Projection.SphericalMercator.unproject(L.point(bookmark.extent.xmax, bookmark.extent.ymax));\r\n                        var southWest = L.Projection.SphericalMercator.unproject(L.point(bookmark.extent.xmin, bookmark.extent.ymin));\r\n                        var bounds = L.latLngBounds(southWest, northEast);\r\n                        this.bookmarks.push({ name: bookmark.name, bounds: bounds });\r\n                    }.bind(this));\r\n                }\r\n\r\n                this._loaded = true;\r\n                this.fire('load');\r\n\t\t  }\r\n\t\t}.bind(this));\r\n\t}\r\n});\r\n\r\nexport function webMap (webmapId, options) {\r\n  return new WebMap(webmapId, options);\r\n}\r\n\r\nexport default webMap;"],"names":["createPopupContent","popupInfo","properties","r","titleText","content","undefined","title","replace","s","m","exec","i","fieldInfos","length","visible","label","fieldName","mediaInfos","createLabelText","labelingInfo","labelText","labelExpression","operationalLayer","layer","layers","map","_generateEsriLayer","console","log","featureCollection","renderer","layerDefinition","drawingInfo","features","labels","featureSet","feature","icon","_generateIcon","attributes","mercatorToLatlng","L","Projection","SphericalMercator","unproject","point","geometry","x","y","f","marker","opacity","popupContent","bindPopup","zIndexOffset","divIcon","iconSize","className","html","push","lyr","featureGroup","labelsLayer","layerGroup","type","layerType","gradient","colorStops","stop","Math","round","ratio","color","esri","Heat","heatmapFeatureLayer","url","minOpacity","max","maxPixelIntensity","blur","blurRadius","radius","where","definitionExpression","featureLayer","ignoreRenderer","pointToLayer","geojson","latlng","style","pathOptions","_generatePathStyle","onEachFeature","l","labelPos","labelClassName","coordinates","reverse","c","centralKey","c2","getBounds","getCenter","addLayer","imageMapLayer","dynamicMapLayer","basemapLayer","e","tiledMapLayer","request","err","res","maxWidth","getSize","tiledAttribution","copyrightText","attributionControl","addAttribution","tileLayer","attribution","id","lyrUrl","_esriWTLUrlTemplateToLeaflet","templateUrl","copyright","_pointSymbol","symbol","iconUrl","imageData","contentType","shadowUrl","height","width","shadowSize","iconAnchor","shadowAnchor","popupAnchor","outline","vectorIcon","svgHeight","size","svgWidth","shape","cx","cy","fill","strokeWidth","stroke","_pathSymbol","weight","outlineColor","fillColor","fillOpacity","_calVisualVariables","visualVariables","vvSymbol","vv","value","field","rate","minDataValue","maxDataValue","submitSize","maxSize","minSize","stops","submitColor","j","uniqueValueInfos","info","field1","classBreakInfos","prevInfo","minValue","classMaxValue","newUrl","webMap","webmapId","options","WebMap","Evented","extend","token","initialize","setOptions","this","_map","_token","_webmapId","_loaded","_metadataLoaded","bookmarks","portalItem","VERSION","version","_loadWebMapMetaData","_loadWebMap","webmap","webmapMetaDataRequestUrl","error","response","fire","fitBounds","extent","webmapRequestUrl","baseMap","baseMapLayers","baseMapLayer","addTo","visibility","bind","operationalLayers","bookmark","northEast","xmax","ymax","southWest","xmin","ymin","bounds","latLngBounds","name"],"mappings":"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"}